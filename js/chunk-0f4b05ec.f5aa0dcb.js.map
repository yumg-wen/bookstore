{"version":3,"sources":["webpack:///./src/views/profile/login.vue","webpack:///./src/views/profile/login.vue?e730","webpack:///./src/network/user.js","webpack:///./src/assets/imgs/logo.jpg"],"names":["_createElementVNode","class","src","_imports_0","alt","_createVNode","_component_nav_bar","default","_hoisted_2","_component_van_form","onSubmit","$setup","_component_van_cell_group","inset","_component_van_field","_ctx","$event","name","label","placeholder","rules","required","message","type","style","onClick","push","path","_component_van_button","round","block","color","native-type","components","navBar","setup","router","useRouter","store","useStore","userInfo","reactive","email","password","login","then","res","console","log","access_token","window","localStorage","setItem","commit","success","setTimeout","go","toRefs","__exports__","render","register","data","request","url","method","logout","getUser","module","exports"],"mappings":"+KAE6B,Q,EAE3BA,eAKM,OALDC,MAAM,YAAU,CAEnBD,eAEM,OAFDC,MAAM,OAAK,CACfD,eAAkD,OAA7CE,IAAAC,IAAiCC,IAAI,aAH7C,G,iBAiCwF,Q,yOApCvFC,eAESC,EAAA,MADSC,QAAO,gBAAC,iBAAI,O,MAE/BC,EAOAH,eA8BSI,EAAA,CA9BEC,SAAQC,YAAQ,C,wBAC3B,iBAiBiB,CAjBjBN,eAiBiBO,EAAA,CAjBDC,MAAA,IAAK,C,wBACnB,iBAME,CANFR,eAMES,EAAA,C,WALSC,Q,qDAAAA,QAAKC,IACdC,KAAK,OACLC,MAAM,OACNC,YAAY,qBACXC,MAAO,CAAC,CAADC,YAAAC,qBALV,uBAOAjB,eAOES,EAAA,C,WANSC,W,qDAAAA,WAAQC,IACjBO,KAAK,WACLN,KAAK,KACLC,MAAM,KACNC,YAAY,qBACXC,MAAO,CAAC,CAADC,YAAAC,mBANV,2B,MAWFtB,eASM,YARJA,eAGM,OAHDC,MAAM,aACXuB,MAAA,gEAAkEC,QAAK,+BAAEV,UAAQW,KAAI,CAAAC,sBAAsB,gBAI3GtB,eAEauB,EAAA,CAFDC,MAAA,GAAMC,MAAA,GAAMP,KAAK,UAAUQ,MAAM,oBAAoBC,cAAY,UAA7E,C,wBAAsF,iBAEtF,O,iBA5BF,qB,wFA2Ca,GACbf,KAAK,QACLgB,WAAW,CAACC,eACZC,MAHa,WAIX,IAAMC,EAAQC,iBACRC,EAAOC,iBACPC,EAAUC,eAAS,CACvBC,MAAM,GACNC,SAAS,KAINjC,EAAS,WACbkC,eAAMJ,GAAUK,MAAK,SAAAC,GACnBC,QAAQC,IAAIF,EAAIG,cAEhBC,OAAOC,aAAaC,QAAQ,QAAQN,EAAIG,cAExCX,EAAMe,OAAO,cAAa,GAE1B,OAAMC,QAAQ,QACdd,EAASE,MAAM,GACfF,EAASG,SAAS,GAClBY,YAAW,WACTnB,EAAOoB,IAAI,KACX,SAGL,wCAAUC,eAAOjB,IAAjB,IAA2B9B,e,qBC7E/B,MAAMgD,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,KAErD,gB,oCCPf,wJAGO,SAASC,EAASC,GACxB,OAAOC,eAAQ,CACXC,IAAI,qBACJC,OAAO,OACPH,SAUE,SAASjB,EAAMiB,GACpB,OAAOC,eAAQ,CACXC,IAAI,kBACJC,OAAO,OACPH,SAQE,SAASI,EAAOJ,GACtB,OAAOC,eAAQ,CACXC,IAAI,mBACJC,OAAO,SAKL,SAASE,EAAQL,GACvB,OAAOC,eAAQ,CACXC,IAAI,gB,qBCvCVI,EAAOC,QAAU,IAA0B","file":"js/chunk-0f4b05ec.f5aa0dcb.js","sourcesContent":["<template>\r\n   <nav-bar>\r\n    <template v-slot:default>登入中心</template>\r\n  </nav-bar>\r\n  <div class=\"register\">\r\n   \r\n    <div class=\"img\">\r\n     <img src=\"../../assets/imgs/logo.jpg\" alt=\"logo\" >\r\n    </div>\r\n  </div>\r\n  <!-- 註冊資訊 -->\r\n  <van-form @submit=\"onSubmit\">\r\n  <van-cell-group inset>\r\n    <van-field\r\n      v-model=\"email\"\r\n      name=\"電子信箱\"\r\n      label=\"電子信箱\"\r\n      placeholder=\"電子信箱 默認:test@a.com\"\r\n      :rules=\"[{ required: true, message: '請輸入電子信箱' }]\"\r\n    />\r\n    <van-field\r\n      v-model=\"password\"\r\n      type=\"password\"\r\n      name=\"密碼\"\r\n      label=\"密碼\"\r\n      placeholder=\"密碼至少為6個字 默認:123123\"\r\n      :rules=\"[{ required: true, message: '請輸入密碼' }]\"\r\n    />\r\n    \r\n  </van-cell-group>\r\n   \r\n  <div >\r\n    <div class=\"link-login\" \r\n    style=\"color:var(--color-tint); margin: 10px;text-align:center;\" @click=\"$router.push({path:'/register'})\">\r\n      尚未有帳號 立即註冊\r\n    </div>\r\n   \r\n    <van-button round block type=\"primary\" color=\"var(--color-tint)\" native-type=\"submit\">\r\n      登入\r\n    </van-button>\r\n  </div>\r\n</van-form>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\nimport navBar from 'components/common/navbar/NavBar.vue'\r\nimport { login} from 'network/user.js'\r\nimport { Notify,Toast } from 'vant'\r\nimport {ref,reactive,toRefs} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nimport {useStore} from 'vuex'\r\nexport default {\r\n  name:'Login',\r\n  components:{navBar},\r\n  setup(){\r\n    const router =useRouter() \r\n    const store =useStore()\r\n    const userInfo =reactive({\r\n      email:\"\",\r\n      password:\"\",\r\n      \r\n    })\r\n\r\n   const onSubmit=()=>{\r\n     login(userInfo).then(res=>{\r\n       console.log(res.access_token)\r\n       //將token保存在本地 window.LocationStorage  setItem(key,value) getItem(key)\r\n       window.localStorage.setItem('token',res.access_token)\r\n       //在vuex(刷新即消失) isLogin臨時保持一個狀態登入\r\n       store.commit('setIsLogin',true)\r\n\r\n       Toast.success('登入成功')\r\n       userInfo.email=\"\"\r\n       userInfo.password=\"\"\r\n       setTimeout(()=>{\r\n         router.go(-1)\r\n       },500)\r\n     })\r\n   }\r\n    return{...toRefs(userInfo),onSubmit}\r\n  }\r\n}\r\n</script>\r\n\r\n<style  scoped>\r\n \r\n\r\n</style>","import { render } from \"./login.vue?vue&type=template&id=538914d2\"\nimport script from \"./login.vue?vue&type=script&lang=js\"\nexport * from \"./login.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\meime\\\\OneDrive\\\\Desktop\\\\book\\\\book-store\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import {request} from './request.js'\r\n\r\n// 獲取註冊資訊 register()\r\nexport function register(data){\r\n return request({\r\n     url:'/api/auth/register',\r\n     method:'post',\r\n     data,\r\n    // 簡寫data:data\r\n  })\r\n}\r\n// 返回狀態 (https://www.showdoc.com.cn/1207745568269674/6090123481636428)\r\n// 狀態碼 201 創建成功\r\n// 狀態碼 422 參數錯誤\r\n\r\n// 獲取登入資訊 login() \r\n//  https://www.showdoc.com.cn/1207745568269674/6090123591593835\r\nexport function login(data){\r\n  return request({\r\n      url:'/api/auth/login',\r\n      method:'post',\r\n      data,\r\n     // 簡寫data:data\r\n   })\r\n }\r\n // 狀態碼 200 登入成功\r\n // 狀態碼 422 參數錯誤\r\n\r\n //退出\r\n export function logout(data){\r\n  return request({\r\n      url:'/api/auth/logout',\r\n      method:'post',\r\n      \r\n   })\r\n }\r\n //用戶個人訊息  https://www.showdoc.com.cn/1207745568269674/6090133286102831\r\n export function getUser(data){\r\n  return request({\r\n      url:'/api/user',\r\n      \r\n      \r\n   })\r\n }","module.exports = __webpack_public_path__ + \"img/logo.f4a4e4dc.jpg\";"],"sourceRoot":""}