(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f39ceea"],{"0fb3":function(e,t,c){},2719:function(e,t,c){},"3a63":function(e,t,c){"use strict";c("ed32")},"48e6":function(e,t,c){"use strict";c("8845")},"52fc":function(e,t,c){},"5a4e":function(e,t,c){},"6a41":function(e,t,c){"use strict";c("0fb3")},"77b8":function(e,t,c){"use strict";c.r(t);var n=c("7a23"),o={id:"home"},a=Object(n["j"])("圖書商城"),r={class:"wrapper"},i={class:"content"},l={ref:"banref"};function u(e,t,c,u,s,b){var d=Object(n["I"])("nav-bar"),j=Object(n["I"])("tab-control"),O=Object(n["I"])("home-swiper"),f=Object(n["I"])("recommend-view"),p=Object(n["I"])("goos-list"),v=Object(n["I"])("back-top");return Object(n["A"])(),Object(n["h"])("div",o,[Object(n["k"])(d,null,{default:Object(n["R"])((function(){return[a]})),_:1}),Object(n["S"])(Object(n["k"])(j,{titles:["暢銷","新書","精選"],onTabClick:u.tabClick},null,8,["onTabClick"]),[[n["O"],u.isTabFixd]]),Object(n["i"])("div",r,[Object(n["i"])("div",i,[Object(n["i"])("div",l,[Object(n["k"])(O,{banners:u.banners},null,8,["banners"]),Object(n["k"])(f,{recommends:u.recommends},null,8,["recommends"])],512),Object(n["k"])(j,{titles:["暢銷","新書","精選"],onTabClick:u.tabClick},null,8,["onTabClick"]),Object(n["k"])(p,{goods:u.showGoods},null,8,["goods"])])]),Object(n["S"])(Object(n["k"])(v,{onClick:u.backTop},null,8,["onClick"]),[[n["O"],u.isBackTop]])])}var s=c("2909"),b=c("a7ac"),d=(c("fb6a"),{class:"recommend"}),j=["onClick"];function O(e,t,c,o,a,r){var i=Object(n["J"])("lazy");return Object(n["A"])(),Object(n["h"])("div",d,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(c.recommends.slice(0,4),(function(e){return Object(n["A"])(),Object(n["h"])("div",{class:"recommend-item",key:e.id},[Object(n["i"])("a",{href:"",onClick:Object(n["T"])((function(t){return o.goD(e.id)}),["prevent"])},[Object(n["S"])(Object(n["i"])("img",null,null,512),[[i,e.cover_url]]),Object(n["i"])("div",null,Object(n["L"])(e.title),1)],8,j)])})),128))])}var f=c("6c02"),p={name:"RecommendView",props:{recommends:{type:Array,default:function(){return[]}}},setup:function(){var e=Object(f["d"])(),t=function(t){e.push({path:"/detail",query:{id:t}})};return{goD:t}}},v=(c("48e6"),c("6b0d")),m=c.n(v);const g=m()(p,[["render",O],["__scopeId","data-v-55dd022a"]]);var k=g,h={class:"tab-control"},y=["onClick"];function w(e,t,c,o,a,r){return Object(n["A"])(),Object(n["h"])("div",h,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(c.titles,(function(e,t){return Object(n["A"])(),Object(n["h"])("div",{class:Object(n["t"])(["tab-control-item",{active:t==o.currentIndex}]),key:t,onClick:function(e){return o.clickItem(t)}},[Object(n["i"])("span",null,Object(n["L"])(e),1)],10,y)})),128))])}var I={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},setup:function(e,t){var c=t.emit,o=Object(n["F"])(0),a=function(e){o.value=e,c("tabClick",e)};return{currentIndex:o,clickItem:a}}};c("cef4");const C=m()(I,[["render",w],["__scopeId","data-v-487c09d4"]]);var _=C,A=c("9a61"),T=c("6e54"),L={alt:""};function F(e,t,c,o,a,r){var i=Object(n["I"])("van-swipe-item"),l=Object(n["I"])("van-swipe"),u=Object(n["J"])("lazy");return c.banners.length?(Object(n["A"])(),Object(n["f"])(l,{key:0,class:"my-swipe",autoplay:3e3,"indicator-color":"white"},{default:Object(n["R"])((function(){return[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(c.banners,(function(e,t){return Object(n["A"])(),Object(n["f"])(i,{key:t},{default:Object(n["R"])((function(){return[Object(n["S"])(Object(n["i"])("img",L,null,512),[[u,e.img_url]])]})),_:2},1024)})),128))]})),_:1})):Object(n["g"])("",!0)}var S={name:"homeSwiper",props:{banners:{type:Array,default:function(){return[]}}}};c("3a63");const G=m()(S,[["render",F],["__scopeId","data-v-784ffabe"]]);var x=G,J=(c("99af"),c("1bab"));function R(){return Object(J["a"])({url:"/api/index",method:"get"})}function q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(J["a"])({url:"api/index?".concat(e,"=1&page=").concat(t)})}var B=c("f40f"),H={name:"Home",components:{navBar:b["a"],RecommendView:k,TabControl:_,GoosList:A["a"],backTop:T["a"],HomeSwiper:x},setup:function(){var e=Object(n["F"])([]),t=Object(n["F"])(!1),c=Object(n["F"])(!1),o=Object(n["F"])(null),a=Object(n["F"])([]),r=Object(n["E"])({sales:{page:1,list:[]},recommend:{page:1,list:[]},new:{page:1,list:[]}}),i=Object(n["F"])("sales"),l=Object(n["d"])((function(){return r[i.value].list})),u=Object(n["E"])({});Object(n["y"])((function(){R().then((function(t){a.value=t.goods.data,console.log(t.slides),console.log(t.goods.data),e.value=t.slides})),q("sales").then((function(e){r.sales.list=e.goods.data})),q("recommend").then((function(e){r.recommend.list=e.goods.data})),q("new").then((function(e){r.new.list=e.goods.data}));var n=document.querySelector(".wrapper");u=new B["a"](n,{probeType:3,click:!0,pullUpLoad:!0}),u.on("scroll",(function(e){c.value=t.value=-e.y>o.value.offsetHeight})),u.on("pullingUp",(function(){var e=r[i.value].page+1;q(i.value,e).then((function(e){var t;(t=r[i.value].list).push.apply(t,Object(s["a"])(e.goods.data)),r[i.value].page+=1})),u.finishPullUp(),u.refresh(),console.log("當前高度"+document.querySelector(".content").clientHeight),console.log("當前類型"+i.value+",當前頁面"+e)}))}));var b=function(e){var t=["sales","new","recommend"];i.value=t[e],Object(n["s"])((function(){u&&u.refresh()}))};Object(n["Q"])((function(){Object(n["s"])((function(){u&&u.refresh(),console.log("計算成功")}))}));var d=function(){u.scrollTo(0,0,500)};return{recommends:a,tabClick:b,goods:r,showGoods:l,isTabFixd:t,banref:o,isBackTop:c,backTop:d,banners:e}}};c("966e");const z=m()(H,[["render",u],["__scopeId","data-v-6b0caca1"]]);t["default"]=z},7947:function(e,t,c){"use strict";c("5a4e")},8845:function(e,t,c){},"966e":function(e,t,c){"use strict";c("52fc")},"9a61":function(e,t,c){"use strict";var n=c("7a23"),o={class:"goods"};function a(e,t,c,a,r,i){var l=Object(n["I"])("goods-list-item");return Object(n["A"])(),Object(n["h"])("div",o,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(c.goods,(function(e){return Object(n["A"])(),Object(n["f"])(l,{key:e,product:e},null,8,["product"])})),128))])}var r=function(e){return Object(n["D"])("data-v-55f2f70a"),e=e(),Object(n["B"])(),e},i={class:"goods-info"},l={class:"price"},u=r((function(){return Object(n["i"])("small",null,"$",-1)})),s={class:"collect"},b=r((function(){return Object(n["i"])("i",{class:"fa-solid fa-star"},null,-1)}));function d(e,t,c,o,a,r){var d=Object(n["J"])("lazy");return Object(n["A"])(),Object(n["h"])("div",{class:"goods-item",onClick:t[0]||(t[0]=function(){return o.itemClick&&o.itemClick.apply(o,arguments)})},[Object(n["S"])(Object(n["i"])("img",null,null,512),[[d,c.product.cover_url]]),Object(n["i"])("div",i,[Object(n["i"])("p",null,Object(n["L"])(c.product.title),1),Object(n["i"])("span",l,[u,Object(n["j"])(" "+Object(n["L"])(c.product.price),1)]),Object(n["i"])("span",s,[b,Object(n["j"])(Object(n["L"])(c.product.collects_count),1)])])])}var j=c("6c02"),O={name:"goodListItem",props:{product:Object,default:function(){return{}}},setup:function(e){var t=Object(j["d"])();return{itemClick:function(){t.push({path:"/detail",query:{id:e.product.id}})}}}},f=(c("6a41"),c("6b0d")),p=c.n(f);const v=p()(O,[["render",d],["__scopeId","data-v-55f2f70a"]]);var m=v,g={name:"goodsList",components:{GoodsListItem:m},props:{goods:{type:Array,default:function(){return[]}}}};c("7947");const k=p()(g,[["render",a],["__scopeId","data-v-2a9759fb"]]);t["a"]=k},cef4:function(e,t,c){"use strict";c("2719")},ed32:function(e,t,c){}}]);
//# sourceMappingURL=chunk-2f39ceea.89732e96.js.map