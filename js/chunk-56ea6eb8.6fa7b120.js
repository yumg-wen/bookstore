(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-56ea6eb8"],{"39d4":function(e,t,c){},"699a":function(e,t,c){"use strict";c("39d4")},bb51:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a=Object(n["j"])("我的分類"),o={class:"main-box"},i={class:"order-tab"},l={class:"goodList"},u={class:"content"};function r(e,t,c,r,s,b){var d=Object(n["I"])("nav-bar"),O=Object(n["I"])("van-sidebar-item"),j=Object(n["I"])("van-collapse-item"),v=Object(n["I"])("van-collapse"),f=Object(n["I"])("van-sidebar"),p=Object(n["I"])("van-tab"),m=Object(n["I"])("van-tabs"),g=Object(n["I"])("van-card"),k=Object(n["I"])("back-top");return Object(n["A"])(),Object(n["h"])(n["a"],null,[Object(n["k"])(d,null,{default:Object(n["R"])((function(){return[a]})),_:1}),Object(n["i"])("div",o,[Object(n["k"])(f,{modelValue:r.activeKey,"onUpdate:modelValue":t[1]||(t[1]=function(e){return r.activeKey=e}),class:"left-menu"},{default:Object(n["R"])((function(){return[Object(n["k"])(v,{modelValue:r.activeName,"onUpdate:modelValue":t[0]||(t[0]=function(e){return r.activeName=e}),accordion:""},{default:Object(n["R"])((function(){return[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(r.categories,(function(e){return Object(n["A"])(),Object(n["f"])(j,{key:e.id,title:e.name,name:e.name},{default:Object(n["R"])((function(){return[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(e.children,(function(e){return Object(n["A"])(),Object(n["f"])(O,{key:e.id,title:e.name,onClick:function(t){return r.getGoods(e.id)}},null,8,["title","onClick"])})),128))]})),_:2},1032,["title","name"])})),128))]})),_:1},8,["modelValue"])]})),_:1},8,["modelValue"]),Object(n["i"])("div",i,[Object(n["k"])(m,{active:r.active,"onUpdate:active":t[2]||(t[2]=function(e){return r.active=e}),onClick:r.clickTab},{default:Object(n["R"])((function(){return[Object(n["k"])(p,{title:"銷量排序"}),Object(n["k"])(p,{title:"價格排序"}),Object(n["k"])(p,{title:"評論排序"})]})),_:1},8,["active","onClick"])]),Object(n["i"])("div",l,[Object(n["i"])("div",u,[(Object(n["A"])(!0),Object(n["h"])(n["a"],null,Object(n["G"])(r.showGoods,(function(e){return Object(n["A"])(),Object(n["f"])(g,{key:e.id,onClick:function(t){return r.itemClick(e.id)},num:e.comments_count,tag:e.comments_count>=3?"流行":"推薦",price:e.price,desc:e.updated_at,title:e.title,thumb:e.cover_url,"lazy-load":!0},null,8,["onClick","num","tag","price","desc","title","thumb"])})),128))])]),Object(n["S"])(Object(n["k"])(k,{onClick:r.backTop},null,8,["onClick"]),[[n["O"],r.isBackTop]])])],64)}var s=c("2909"),b=c("a7ac"),d=c("6e54"),O=(c("99af"),c("1bab"));function j(){return Object(O["a"])({url:"/api/goods"})}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sales",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(O["a"])({url:"/api/goods?category_id=".concat(t,"&page=").concat(c,"&order=").concat(e)})}var f=c("6c02"),p=c("f40f"),m={name:"CateGory",components:{navBar:b["a"],backTop:d["a"]},setup:function(){var e=Object(f["d"])(),t=Object(n["F"])(!1),c=Object(n["F"])([]),a=Object(n["F"])(0),o=Object(n["F"])(1),i=Object(n["F"])(1),l=Object(n["F"])("sales"),u=Object(n["F"])(0),r=Object(n["E"])({sales:{page:1,list:[]},price:{page:1,list:[]},comments_count:{page:1,list:[]}}),b=Object(n["d"])((function(){return r[l.value].list})),d=function(){v("sales",u.value).then((function(e){r.sales.list=e.goods.data})),v("price",u.value).then((function(e){r.price.list=e.recommend_goods})),v("comments_count",u.value).then((function(e){r.comments_count.list=e.recommend_goods}))},O=Object(n["E"])({});Object(n["y"])((function(){j().then((function(e){c.value=e.categories})),d();var e=document.querySelector(".goodList");O=new p["a"](e,{probeType:3,click:!0,pullUpLoad:!0}),O.on("scroll",(function(e){t.value=-e.y>800})),O.on("pullingUp",(function(){var e=r[l.value].page+1;v(l.value,u.value).then((function(e){var t;(t=r[l.value].list).push.apply(t,Object(s["a"])(e.goods.data)),r[l.value].page+=1})),O.finishPullUp(),Object(n["s"])((function(){O&&O.refresh(),console.log("計算成功")})),console.log("當前高度"+document.querySelector(".content").clientHeight),console.log("當前類型"+l.value+",當前頁面"+e)}))}));var m=function(e){var t=["sales","price","comments_count"];l.value=t[e],v("sales",u.value).then((function(e){r.sales.list=e.goods.data})),O&&O.refresh()},g=function(e){u.value=e,d()};Object(n["Q"])((function(){Object(n["s"])((function(){O&&O.refresh(),console.log("計算成功")}))}));var k=function(){O.scrollTo(0,0,300)};return{activeKey:a,categories:c,activeName:o,active:i,isBackTop:t,backTop:k,clickTab:m,currentOrder:l,currentId:u,getGoods:g,goods:r,showGoods:b,bscroll:O,itemClick:function(t){e.push({path:"/detail",query:{id:t}})}}}},g=(c("699a"),c("6b0d")),k=c.n(g);const h=k()(m,[["render",r],["__scopeId","data-v-0259d1d2"]]);t["default"]=h}}]);
//# sourceMappingURL=chunk-56ea6eb8.6fa7b120.js.map